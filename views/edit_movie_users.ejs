<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0"/>
    <title>Editar Reseña de Película</title>
    <link rel="stylesheet" href="/styles.css">
    <style>
        .edit-wrap{ width:min(720px,92vw); margin:40px auto; }
        .edit-head{ text-align:center; margin-bottom:12px }
        .back{ text-align:center; margin-top:18px }
    </style>
</head>
<body>

<header class="header">
    <a class="home-btn" href="/">
        <img src="/imgs/casa3.png" alt="Inicio">
    </a>
</header>

<main class="edit-wrap card">
    <h1 class="edit-head">Editar Reseña de: <%= movie.title %></h1>

    <!-- Unificado: rating + opinión -->
    <form action="/users/<%= user.user_id %>/movies/<%= movie.movie_id %>/review" method="POST" style="text-align:center">
        <div class="star-rating" aria-label="Puntaje">
            <% for (let i = 5; i >= 1; i--) { %>
                <input type="radio" id="edit-star-<%= i %>" name="rating" value="<%= i %>" <%= Number(movie.rating) === i ? 'checked' : '' %> required>
                <label for="edit-star-<%= i %>" title="<%= i %> estrella<%= i>1?'s':'' %>">★</label>
            <% } %>
        </div>

        <div style="margin-top:12px;">
            <textarea id="opinion" name="opinion" rows="5" placeholder="Escribí tu opinión…" required style="width:100%;"><%= movie.opinion || '' %></textarea>
        </div>

        <div style="margin-top:12px">
            <button type="submit" class="btn">Guardar Cambios</button>
            <a class="btn-outline" href="/pelicula/<%= movie.movie_id %>?from=movie">← Volver a la película</a>
        </div>
    </form>
</main>

</body>
</html>
